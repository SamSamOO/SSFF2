<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="kr.or.ssff.mapper.StudyInsMapper">
    <delete id="remove">

        delete
        from si_board
        where cont_No = #{cont_No}

    </delete>

    <delete id="delete">

        delete
        from study_ins_file
        where cont_No = #{cont_No}

    </delete>

    <insert id="insert">
        insert into study_ins_file (file_No, cont_No, file_Name)
        values (#{file_No}, #{cont_No}, #{file_Name})
    </insert>

    <insert id="insertBoard">
        insert into SI_BOARD(cont_No, member_name, r_idx, cont, category, title, REMOVED_OK, WRITE_DATE)
        values (#{cont_No}, #{member_Name}, #{r_Idx}, #{cont}, #{category}, #{title}, 'n', sysdate)


    </insert>
    <insert id="insertFiles" parameterType="java.util.List">
        insert into STUDY_INS_FILE(CONT_NO, FILE_NAME)
        VALUES
        <foreach collection="list" item="item" separator=",">
            (#{item.cont_No}, #{item.file_Name})
        </foreach>


    </insert>

    <select id="getList" resultType="kr.or.ssff.studyIns.domain.StudyInsVO">

    <![CDATA[
        select /*+ cont_no_desc(si_board) */ *
        from si_board
        where cont_no < 100
        ]]>

    </select>
    <select id="findMaxContNo" resultType="integer">
        select MAX(nvl2(CONT_NO, CONT_NO, 0))
        from SI_BOARD

    </select>
    <select id="findByBno" resultType="kr.or.ssff.studyIns.model.StudyInsFileDTO">

        select *
        from study_ins_file
        where cont_No = #{cont_No}

    </select>

    <select id="read" resultType="kr.or.ssff.studyIns.domain.StudyInsVO">

		<![CDATA[
        select *
        from si_board
        where cont_No = #{cont_No}
        ]]>

	</select>

    <update id="update">
        update si_board
        set title=#{title},
            cont=#{cont},
            modify_Date=sysdate,
            category=#{category}
        where cont_No = #{cont_No}
    </update>
</mapper>