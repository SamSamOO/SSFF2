<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="kr.or.ssff.mapper.ChattingMapper">

    <insert id="insertMsg" parameterType="hashMap">
        insert into CHAT_MSG(MSG_NO, MEMBER_NAME, R_IDX, MSG_CONT, SEND_TIME)
        values (CHAT_MSG_SQE.nextval, #{member_Name}, #{r_Idx}, #{msg_Cont}, current_timestamp)

    </insert>

    <select id="selectBySendTime" resultType="kr.or.ssff.studyIns.model.ChatMsgDTO">
        <![CDATA[
        select /*+ INDEX_ASC(CHAT_MSG idx_chat_sendtime)*/ MSG_NO, MEMBER_NAME, R_IDX, MSG_CONT, SEND_TIME
        from CHAT_MSG
        where R_IDX = #{r_Idx}
          and ROWNUM <= 100
        order by SEND_TIME
        ]]>
    </select>

    <select id="checkYouInStudy" parameterType="hashMap" resultType="Integer">
        select RB.R_IDX,
               RB.MEMBER_NAME,
               TYPE_PC,
               TITLE,
               TEAMNAME,
               CONT,
               HIT,
               WRITEDATE,
               SIDO,
               CH_PATTERN,
               CH_START,
               CH_END,
               REMOVED_OK,
               CLOSED_OK,
               DEAD_OK
        from RECRUIT_BOARD RB
                 join APPLY_MEMBER AM on RB.R_IDX = AM.R_IDX
        where RB.R_IDX = #{map.r_Idx,jdbcType=INTEGER}
          and RB.MEMBER_NAME = #{map.member.member_name,jdbcType=VARCHAR}
          and AM.STUDY_JOIN_ARCIWF = 'i'


    </select>

</mapper>